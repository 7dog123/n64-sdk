<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>

<!---------------------------------------------------->
<!--Title, Header, and META Block-->
<!---------------------------------------------------->

<HEAD>
<TITLE>N64 Functions Reference (HTML Manual Pages) Function Page</TITLE>

<META Name="DESCRIPTION" CONTENT="The N64 Functions Reference completely describes all the N64 functions that you can use to develop games for the N64 operating system.">
<META NAME="CLASSIFICATION" CONTENT="functions, reference, N64, man pages, HTML, manpages, pages, development, Nintendo, license, tips, secrets, help, manual, guide, success, money, profit, index, indexing, online, on-line">
<META NAME="KEYWORDS" CONTENT="functions, reference, N64, man pages, HTML, manpages, pages, development, Nintendo, license, tips, secrets, help, manual, guide, success, money, profit, index, indexing, online, on-line">
<META HTTP-EQUIV="KEYWORDS" CONTENT="functions, reference, N64, man pages, HTML, manpages, pages, development, Nintendo, license, tips, secrets, help, manual, guide, success, money, profit, index, indexing, online, on-line">
<META NAME="Author" CONTENT="Nintendo of America Inc.">
<META NAME="Generator" CONTENT="WebEdit Pro version 2.0 for Windows 95">
</HEAD>


<!---------------------------------------------------->
<!--Colors and Background Graphic Block-->
<!---------------------------------------------------->

<BODY BGCOLOR="#FFFFFF" BACKGROUND = "../images/lineback.gif" text=29296B link=#0000A0
vlink=20297c alink=86ffff>
<A NAME="TOP"></A>


<!---------------------------------------------------->
<!--Define Master Table Structure-->
<!---------------------------------------------------->

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 UNITS="pixels" WIDTH=600>
   <TR VALIGN="top" ALIGN="left">
      <TD COLSPAN=1 WIDTH=25>
         <IMG SRC="../images/space.gif" WIDTH=25 HEIGHT=1 BORDER=0></TD>
      <TD COLSPAN=1 WIDTH=175>
         <IMG SRC="../images/space.gif" WIDTH=175 HEIGHT=1 BORDER=0></FONT></TD>
      <TD COLSPAN=1 WIDTH=10>
         <IMG SRC="../images/space.gif" WIDTH=10 HEIGHT=1 BORDER=0></TD>
      <TD COLSPAN=1 WIDTH=25>
         <IMG SRC="../images/space.gif" WIDTH=25 HEIGHT=1 BORDER=0></TD>
      <TD COLSPAN=1 WIDTH=375>
         <IMG SRC="../images/space.gif" WIDTH=375 HEIGHT=1 BORDER=0></TD>
   </TR>


<!---------------------------------------------------->
<!--Define Left Column Contents-->
<!---------------------------------------------------->

   <TR VALIGN="top" ALIGN="left">
      <TD COLSPAN=2 WIDTH=200 ROWSPAN=1>
      <FONT SIZE=-2 COLOR=#0000A0 FACE="ARIAL">

      <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=180>
         <TR VALIGN="bottom" ALIGN="center" >
            <TD>
            <A HREF="../misc/home.html">
               <IMG BORDER=0 SRC="../images/ncube.gif"></A><BR><BR>
            <FONT COLOR=#29296B FACE="ARIAL" SIZE=-1>
            <B>N64<SUP>&reg;</SUP> Functions Menu</B><BR>

            </FONT>
            </TD>
         </TR>
      </TABLE><BR>

<A HREF="../al/al.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> al - Audio Library Functions</A><BR>
<A HREF="../gdp/gdp.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> gDP - DP GBI Macros</A><BR>
<A HREF="../gdsp/gdsp.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> gdSP - General GBI Macros</A><BR>
<A HREF="../gsp/gsp.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> gSP - SP GBI Macros</A><BR>
<A HREF="../gt/gt.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> gt - Turbo Microcode RDP</A><BR>
<A HREF="../gu/gu.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> gu - Graphics Utilities</A><BR>
<A HREF="../math/math.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> Math - Math Functions</A><BR>
<A HREF="../nusys/nusys.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> nuSys - NuSystem</A><BR>
<A HREF="../os/os.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> os - N64 Operating System</A><BR>
<A HREF="../sp/sp.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> sp - Sprite Library Functions</A><BR>
<A HREF="../uh/uh.html">
   <IMG BORDER=0 SRC="../images/bookopen.gif"> uh - Host to Target IO</A><BR>
<A HREF="../64dd/64dd.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> 64DD - N64 Disk Drive</A><BR><TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=170><TR VALIGN="bottom" ALIGN="center" ><TD><BR><FONT COLOR="FF0000" FACE="arial" SIZE="-1"><B>Nintendo<SUP>&reg;</SUP> Confidential</B></FONT></TD></TR></TABLE>

<!---------------------------------------------------->
<!--Define Bottom-Left Graphics-->
<!---------------------------------------------------->

<BR>
<BR>
      <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 ALIGN="left">
         <TR VALIGN="top" ALIGN="center" WIDTH=210>
            <TD>
            <A HREF="../misc/home.html">
               <IMG BORDER=0 SRC="../images/btn_home.gif" WIDTH=54></A>

            <A HREF="../misc/search.html">
               <IMG BORDER=0 SRC="../images/btn_search.gif" WIDTH=54></A>

            <A HREF="../misc/glossary.html">
               <IMG BORDER=0 SRC="../images/btn_glossary.gif" WIDTH=54></A>
            </TD>
         </TR>
      </TABLE>


<!---------------------------------------------------->
<!--Define Spacer Column Contents-->
<!---------------------------------------------------->

      <TD COLSPAN=1 WIDTH=10 HEIGHT=400 ROWSPAN=1>
      <IMG SRC="../images/space.gif" BORDER=0></TD>


<!---------------------------------------------------->
<!--Define Right Column Graphics-->
<!---------------------------------------------------->

      <TD COLSPAN=2 ROWSPAN=1 WIDTH=425 ALIGN="left">
      <FONT COLOR=#000000 FACE="ARIAL" SIZE=-1>

      <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=427>
         <TR VALIGN="top" ALIGN="center" >
            <TD>
            <A HREF="../misc/home.html">
            <IMG BORDER=0 HEIGHT=85 SRC="../images/mantitle.gif"></A><BR><BR>
            </TD>
         </TR>
      </TABLE>


      <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=427>
         <TR VALIGN="top" ALIGN="left" >
            <TD>
            <A HREF="../uh/uh.html">
            <IMG BORDER=0 SRC="../images/mh_hostio.gif"></A>
            </TD>
         </TR>
      </TABLE><BR>

<!---------------------------------------------------->
<!--Define Right Column Text ** INSERT TEXT HERE ** -->
<!---------------------------------------------------->


<H2><FONT COLOR="0000A0">
uhCloseGame</FONT>
</H2>




<P>
<B>Syntax</B><BR>
<FONT FACE="COURIER NEW,COURIER" size="3"><pre>#include &lt;ultrahost.h&gt;
<font color="#008000">int uhOpenGame(const char *device);</font></pre>

<p>int uhReadGame(int fd, void *addr, int nbytes);<br>
int uhWriteGame(int fd, void *addr, int nbytes);</p>

<p>int uhReadRamRom(int fd,void *ramrom_addr,void *local_addr,int nbytes);<br>
int uhWriteRamRom(int fd,void *ramrom_addr,void *local_addr,int nbytes);</p>

<p>int uhCloseGame(int fd);</p></font>

<p>
For information on PARTNER functions, see <a href="../uh/uhPartnerCmd.html">uhPatnerCmd.</a>

<P>
<B>Return Value</B><BR>
On success, <FONT FACE="COURIER NEW,COURIER">uhOpenGame</FONT> returns a valid file descriptor.  Otherwise, it returns -1 and sets errno to indicate the error.

<P>
<b>Explanation</b>
<br>
The host-to-target IO routines allow a host application to set up a communications channel for the transfer of raw data between the host and the game. They work in concert with OS routines on the game side.
(For information on other routines called from the game, please see <a target="new" href="../os/osReadHost.html">osReadHost.</a>)
<P>
The uhOpenGame routine performs initialization that allows communication events to be received by the specified device (e.g., &quot;/dev/u64_data&quot;,&quot;PARTNER-N64&quot;).  It returns a handler that enables the device to be operated.  If the device is successfully opened, the handler returned by uhOpenGame is passed to uhReadGame, uhWriteGame,uhReadRamrom, uhWriteRamrom, and uhCloseGame. </p>

The <FONT FACE="COURIER NEW,COURIER">uhReadGame</FONT> routine attempts to read <FONT FACE="COURIER NEW,COURIER">nbytes</FONT> of data from the game
and copy it to the memory region beginning at <FONT FACE="COURIER NEW,COURIER">addr</FONT>. For correct operation, it should be paired from the game side with a <FONT FACE="COURIER NEW,COURIER">osWriteHost</FONT> with exactly the same number of bytes. The <FONT FACE="COURIER NEW,COURIER">uhWriteGame</FONT> routine attempts to copy <FONT FACE="COURIER NEW,COURIER">nbytes</FONT> of data from the host beginning at <FONT FACE="COURIER NEW,COURIER">addr</FONT> to the game.
<P>
When both sides have
correctly made the corresponding procedure call, the transfer will take
place and the blocking side will proceed.


<P>
If the read is attempted from the host
side before the game has executed the write, the host process will block.
Conversely, if the write is attempted from the game side before the host
has executed a read, the game thread will block. 
<P>
The <FONT FACE="COURIER NEW,COURIER">uhReadRamrom</FONT> routine attempts to copy <FONT FACE="COURIER NEW,COURIER">nbytes</FONT> of data from the
ramrom memory, beginning at <FONT FACE="COURIER NEW,COURIER">ramrom_addr</FONT>.
<P>
The <FONT FACE="COURIER NEW,COURIER">uhWriteRamrom</font> routine attempts to write <FONT FACE="COURIER NEW,COURIER">nbytes</FONT> from data to the
ramrom memory beginning at <FONT FACE="COURIER NEW,COURIER">ramrom_addr</FONT>. 
<P>
The <FONT FACE="COURIER NEW,COURIER">uhCloseGame</FONT> procedure can be used if desired to close the given file descriptor.

<p>These routines are provided by the NINTENDO 64 host communication library (e.g., libultrahost.a).  Using them requires a makefile entry that links these libraries (e.g., -lultrahost). </p>

<p>When using PARTNER, PARTNER must have been started when the host application is executed. 


<P>
<B>Example</B><BR>
The following is an example of using uh functions for the development cassette.<br>
(An example of their use with PARTNER is in <a href="../uh/uhPartnerCmd.html">uhPartnerCmd.</a>)</p>

<Pre><FONT FACE="COURIER NEW,COURIER" size="3">main(int argc, char **argv) /* Host side code */
          {
                  pid_t pid;
                  int fd, status;
                  if ((fd = uhOpenGame(&quot;/dev/u64_data&quot;)) == -1) {
                          perror(&quot;uhOpenGame&quot;);
                          return(-1);
                  }
                  if ((pid = fork()) == -1) {
                          perror(&quot;fork&quot;);
                          return(-1);
                  } else if (pid == 0) {
                          (void)execl(&quot;/usr/sbin/gload&quot;, &quot;/usr/sbin/gload&quot;, 0);
                          fprintf(stderr, &quot;host: execl(\&quot;gload\&quot;) failed\n&quot;);
                          return(-1);
                  }
                  if (uhReadGame(fd, hostBuffer, 4) == -1) {
                          fprintf(stderr, &quot;uhReadGame %s\n&quot;, sys_errlist[errno]);
                          return(1);
                  }
                  if (uhCloseGame(fd) != 0) {
                          perror(&quot;uhCloseGame&quot;);
                          return(-1);
                  }
                  if (waitpid(pid, &amp;status, WUNTRACED) == -1) {
                          perror(&quot;waitpid&quot;);
                          return(-1);
                  }
          }

        mainproc(void *arg) /* Game side code */
          {
                  osWriteHost(gameBuffer, 4);
                  osExit();
          }</pre>
</FONT>






 

<P>
<B>See Also</B>
<br>
<FONT FACE="COURIER NEW,COURIER"><A HREF="../uh/uhReadGame.html">uhReadGame</A></FONT><BR>
<FONT FACE="COURIER NEW,COURIER"><A HREF="../uh/uhWriteGame.html">uhWriteGame</A></FONT><BR>
<FONT FACE="COURIER NEW,COURIER"><A HREF="../uh/uhReadRamrom.html">uhReadRamrom</A></FONT><BR>
<FONT FACE="COURIER NEW,COURIER"><A HREF="../uh/uhWriteRamrom.html">uhWriteRamrom </A></FONT><BR>
<FONT FACE="COURIER NEW,COURIER"><A HREF="../os/osReadHost.html">osReadHost</A></FONT><BR>
<FONT FACE="COURIER NEW,COURIER"><A HREF="../os/osWriteHost.html">osWriteHost</A></FONT><BR>
<FONT FACE="COURIER NEW,COURIER"><A HREF="../os/osTestHost.html">osTestHost</A></FONT><BR>
<FONT FACE="COURIER NEW,COURIER"><A HREF="../os/osAckRamromRead.html">osAckRamromRead</A></FONT><BR>
<FONT FACE="COURIER NEW,COURIER"><A HREF="../os/osAckRamromWrite.html">osAckRamromWrite</A></FONT><BR>




<!---------------------------------------------------->
<!--Define Button Bar in a Table for Bottom-Right-->
<!---------------------------------------------------->
<BR>
      <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 ALIGN="center">

         <TR VALIGN="top" ALIGN="center" WIDTH=312>
            
               
            <TD COLSPAN=1 WIDTH=52>
               <IMG SRC="../images/space.gif" WIDTH=52 HEIGHT=30 BORDER=0></TD>
            <TD COLSPAN=1 WIDTH=52>
               <IMG SRC="../images/space.gif" WIDTH=52 HEIGHT=30 BORDER=0></TD>
            <TD COLSPAN=1 WIDTH=52>
               <IMG SRC="../images/space.gif" WIDTH=52 HEIGHT=30 BORDER=0></TD>
            <TD COLSPAN=1 WIDTH=52>
               <IMG SRC="../images/space.gif" WIDTH=52 HEIGHT=30 BORDER=0></TD>
            <TD COLSPAN=1 WIDTH=52>
               <IMG SRC="../images/space.gif" WIDTH=52 HEIGHT=30 BORDER=0></TD>
            <TD COLSPAN=1 WIDTH=52>
               <IMG SRC="../images/space.gif" WIDTH=52 HEIGHT=30 BORDER=0></TD>
         </TR>
         <TR VALIGN="top" ALIGN="center">
            
               
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../al/al.html">
               <IMG SRC="../images/bb_al.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../gdp/gdp.html">
               <IMG SRC="../images/bb_gdp.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../gdsp/gdsp.html">
               <IMG SRC="../images/bb_gdsp.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../gsp/gsp.html">
               <IMG SRC="../images/bb_gsp.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../gt/gt.html">
               <IMG SRC="../images/bb_gt.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../gu/gu.html">
               <IMG SRC="../images/bb_gu.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
         </TR>
         <TR VALIGN="top" ALIGN="right">
            
               
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../math/math.html">
               <IMG SRC="../images/bb_math.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../nusys/nusys.html">
               <IMG SRC="../images/bb_nusys.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../os/os.html">
               <IMG SRC="../images/bb_os.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../sp/sp.html">
               <IMG SRC="../images/bb_sp.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../uh/uh.html">
               <IMG SRC="../images/bb_uh.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../64dd/64dd.html">
               <IMG SRC="../images/bb_64dd.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
      </TABLE>

      <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=425>
         <TR VALIGN="bottom" ALIGN="center" WIDTH=425>
            <TD><BR><BR>
            <IMG BORDER=0 HEIGHT=25 SRC="../images/nin_logo.gif">
            </TD>
         </TR>
         <TR VALIGN="bottom" ALIGN="center" WIDTH=425>
            <TD>
            <FONT FACE="arial" COLOR=FF0000 SIZE="-1"><B>Nintendo<SUP>&reg;</SUP> Confidential</B><BR>
            <BR>
               <B>Warning:</B> all information in this document is confidential and covered by a non-disclosure agreement. You are responsible for keeping this information confidential and protected. Nintendo will vigorously enforce this responsibility.<BR><BR></FONT><FONT FACE="arial" SIZE=-2 COLOR=0000A0><B>Copyright &copy; 1998<BR>
               Nintendo of America Inc. All rights reserved<BR>Nintendo and N64 are registered trademarks of Nintendo<BR>
               Last updated March 1998
            </B>
            </FONT>
            </TD>
         </TR>
      </TABLE>
      </FONT>
      </TD>
   </TR>
</TABLE>
</BODY>
</HTML>




