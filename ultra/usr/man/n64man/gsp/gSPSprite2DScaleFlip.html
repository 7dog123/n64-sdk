<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>

<!---------------------------------------------------->
<!--Title, Header, and META Block-->
<!---------------------------------------------------->

<HEAD>
<TITLE>N64 Functions Reference (HTML Manual Pages) Function Page</TITLE>

<META Name="DESCRIPTION" CONTENT="The N64 Functions Reference completely describes all the N64 functions that you can use to develop games for the N64 operating system.">
<META NAME="CLASSIFICATION" CONTENT="macros, reference, N64, man pages, HTML, manpages, pages, development, Nintendo, license, tips, secrets, help, manual, guide, success, money, profit, index, indexing, online, on-line">
<META NAME="KEYWORDS" CONTENT="macros, reference, N64, man pages, HTML, manpages, pages, development, Nintendo, license, tips, secrets, help, manual, guide, success, money, profit, index, indexing, online, on-line">
<META HTTP-EQUIV="KEYWORDS" CONTENT="macros, reference, N64, man pages, HTML, manpages, pages, development, Nintendo, license, tips, secrets, help, manual, guide, success, money, profit, index, indexing, online, on-line">
<META NAME="Author" CONTENT="Nintendo of America Inc.">
<META NAME="Generator" CONTENT="WebEdit Pro version 2.0 for Windows 95">
</HEAD>


<!---------------------------------------------------->
<!--Colors and Background Graphic Block-->
<!---------------------------------------------------->

<BODY BGCOLOR="#FFFFFF" BACKGROUND = "../images/lineback.gif" text=29296B link=#0000A0
vlink=20297c alink=86ffff>
<A NAME="TOP"></A>


<!---------------------------------------------------->
<!--Define Master Table Structure-->
<!---------------------------------------------------->

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 UNITS="pixels" WIDTH=600>
   <TR VALIGN="top" ALIGN="left">
      <TD COLSPAN=1 WIDTH=25>
         <IMG SRC="../images/space.gif" WIDTH=25 HEIGHT=1 BORDER=0></TD>
      <TD COLSPAN=1 WIDTH=175>
         <IMG SRC="../images/space.gif" WIDTH=175 HEIGHT=1 BORDER=0></FONT></TD>
      <TD COLSPAN=1 WIDTH=10>
         <IMG SRC="../images/space.gif" WIDTH=10 HEIGHT=1 BORDER=0></TD>
      <TD COLSPAN=1 WIDTH=25>
         <IMG SRC="../images/space.gif" WIDTH=25 HEIGHT=1 BORDER=0></TD>
      <TD COLSPAN=1 WIDTH=375>
         <IMG SRC="../images/space.gif" WIDTH=375 HEIGHT=1 BORDER=0></TD>
   </TR>


<!---------------------------------------------------->
<!--Define Left Column Contents-->
<!---------------------------------------------------->

   <TR VALIGN="top" ALIGN="left">
      <TD COLSPAN=2 WIDTH=200 ROWSPAN=1>
      <FONT SIZE=-2 COLOR=#0000A0 FACE="ARIAL">

      <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=180>
         <TR VALIGN="bottom" ALIGN="center" >
            <TD>
            <A HREF="../misc/home.html">
               <IMG BORDER=0 SRC="../images/ncube.gif"></A><BR><BR>
            <FONT COLOR=#29296B FACE="ARIAL" SIZE=-1>
            <B>N64<SUP>&reg;</SUP> Functions Menu</B><BR>

            </FONT>
            </TD>
         </TR>
      </TABLE><BR>

<A HREF="../al/al.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> al - Audio Library Functions</A><BR>
<A HREF="../gdp/gdp.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> gDP - DP GBI Macros</A><BR>
<A HREF="../gdsp/gdsp.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> gdSP - General GBI Macros</A><BR>
<A HREF="../gsp/gsp.html">
   <IMG BORDER=0 SRC="../images/bookopen.gif"> gSP - SP GBI Macros</A><BR>
<A HREF="../gt/gt.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> gt - Turbo Microcode RDP</A><BR>
<A HREF="../gu/gu.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> gu - Graphics Utilities</A><BR>
<A HREF="../math/math.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> Math - Math Functions</A><BR>
<A HREF="../nusys/nusys.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> nuSys - NuSystem</A><BR>
<A HREF="../os/os.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> os - N64 Operating System</A><BR>
<A HREF="../sp/sp.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> sp - Sprite Library Functions</A><BR>
<A HREF="../uh/uh.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> uh - Host to Target IO</A><BR>
<A HREF="../64dd/64dd.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> 64DD - N64 Disk Drive</A><BR><TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=170><TR VALIGN="bottom" ALIGN="center" ><TD><BR><FONT COLOR="FF0000" FACE="arial" SIZE="-1"><B>Nintendo<SUP>&reg;</SUP> Confidential</B></FONT></TD></TR></TABLE>

<!---------------------------------------------------->
<!--Define Bottom-Left Graphics-->
<!---------------------------------------------------->

<BR>
<BR>
      <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 ALIGN="left">
         <TR VALIGN="top" ALIGN="center" WIDTH=210>
            <TD>
            <A HREF="../misc/home.html">
               <IMG BORDER=0 SRC="../images/btn_home.gif" WIDTH=54></A>

            <A HREF="../misc/search.html">
               <IMG BORDER=0 SRC="../images/btn_search.gif" WIDTH=54></A>

            <A HREF="../misc/glossary.html">
               <IMG BORDER=0 SRC="../images/btn_glossary.gif" WIDTH=54></A>
            </TD>
         </TR>
      </TABLE>


<!---------------------------------------------------->
<!--Define Spacer Column Contents-->
<!---------------------------------------------------->

      <TD COLSPAN=1 WIDTH=10 HEIGHT=400 ROWSPAN=1>
      <IMG SRC="../images/space.gif" BORDER=0></TD>


<!---------------------------------------------------->
<!--Define Right Column Graphics-->
<!---------------------------------------------------->

      <TD COLSPAN=2 ROWSPAN=1 WIDTH=425 ALIGN="left">
      <FONT COLOR=#000000 FACE="ARIAL" SIZE=-1>

      <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=427>
         <TR VALIGN="top" ALIGN="center" >
            <TD>
            <A HREF="../misc/home.html">
            <IMG BORDER=0 HEIGHT=85 SRC="../images/mantitle.gif"></A><BR><BR>
            </TD>
         </TR>
      </TABLE>


      <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=427>
         <TR VALIGN="top" ALIGN="left" >
            <TD>
            <A HREF="../gsp/gsp.html">
            <IMG BORDER=0 SRC="../images/mh_gsp.gif"></A>
            </TD>
         </TR>
      </TABLE><BR>

<!---------------------------------------------------->
<!--Define Right Column Text ** INSERT TEXT HERE ** -->
<!---------------------------------------------------->


<H2><FONT COLOR="0000A0">
gSPSprite2DScaleFlip
</FONT>
</H2>

<B>Format</B><BR>
<FONT FACE="COURIER NEW,COURIER" SIZE=3><PRE>#include "gbi.h"

gSPSprite2DScaleFlip(Gfx*gdl,
   short ScaleX, short ScaleY, 
   char FlipTextureX,
   char FlipTextureY);
gsSPSprite2DScaleFlip(short ScaleX,
   short ScaleY, char FlipTextureX,
   char FlipTextureY);</PRE></FONT>

<B>Arguments</B><BR>
<UL><LI><FONT FACE="COURIER NEW,COURIER">gdl</FONT> is the pointer to the graphics display list
<LI><FONT FACE="COURIER NEW,COURIER">ScaleX</FONT> specifies the scale in the X axis for the input screen image as a s 5.10 fixed-point number.  A value of 1024 specifies 1-to-1 scaling. A value of 512 enlarges the input texels by 2 times in the output scaling pixels. Scale values should be less than 1024 in order to avoid an unnatural feel.  Scale values must be positive. Use the FlipTextureX variable to create negatively scaled images
<LI><FONT FACE="COURIER NEW,COURIER">ScaleY</FONT> specifies the scale in the Y axis for the input screen image as a s 5.10 fixed-point number.  A value of 1024 specifies 1-to-1 scaling. A value of 512 enlarges the input texels by 2 times in the output scaling pixels. Scale values should be less than 1024 in order to avoid an unnatural feel. Scale values must be positive.  Use the FlipTextureY variable to create negatively scaled images
<LI><FONT FACE="COURIER NEW,COURIER">FlipTextureX</FONT> specifies whether the image to be displayed should be inverted in the X direction
<LI><FONT FACE="COURIER NEW,COURIER">FlipTextureY</FONT> specifies whether the image to be displayed should be inverted in the Y direction</UL>

<B>What This Macro Does</B><BR>

It gains access to the sprite microcode. The optimized, full-featured 2D sprite geometry microcode supports automatic subdivision and loads any size of all of the 
texture format sizes and types supported in the macro, and sends 
it directly to the RDP. Additionally, images can be scaled up or 
inverted in the X or Y directions.<BR>
<BR>

You can gain access to the sprite microcode through a combination of four macros:

<UL><LI>guSprite2DInit initializes a specified sprite structure.
<LI>gSPSprite2DBase sends the sprite microcode to the initialized sprite structure to start actual processing. It initialize the common sprite parameters but does not perform actual screen drawing.
<LI>gSPSprite2DScaleFlip specifies the X/Y scaling and/or flipping parameters for a sprite but does not perform actual screen drawing.
<LI>gSPSprite2DDraw specifies the screen coordinates where the sprite is to be drawn, and starts actual screen drawing using the parameters specified by gSPSprite2DBase and gSPSprite2DScaleFlip</UL>

<B>Example</B><BR>
To display a sprite, use this code:

<FONT FACE="COURIER NEW,COURIER" SIZE=3><PRE>#include "gu.h"

#include "gbi.h"
   uSprite MySprite;
   guSprite2DInit(Mysprite,
   ImagePointer, TlutPointer, 
   ImageWidth, RectangleWidth,
   RetangleHeight, 
   ImageType, ImageSize, 
   TextureStartS, TextureStartT);

gSPSprite2DBase(glistp++,
   OS_K0_TO_PHYSICAL(MySprite));

gSPSprite2DScaleFlip (glistp++,
   ScaleX, ScaleY,
   FlipTextureX, FlipTextureY); 

gSPSprite2DDraw (glistp++,
   PScreenX, PScreenY)

typedef struct {
   void *SourceImagePointer;
   void *TlutPointer;
   short Stride;
   short SubImageWidth;
   short SubImageHeight;
   char  SourceImageType;
   char  SourceImageBitSize;
   short SourceImageOffsetS;
   short SourceImageOffsetT;
/* 20 bytes for above */

/* padding to bring structure size
   to 64-bit alignment */;
   char dummy[4];

} uSprite_t;

typedef union {
   uSprite_t  s;
/* Make sure this is 64 bit aligned */;
   long long int
      force_structure_alignment[3];
} uSprite;

   void guSprite2DInit(uSprite *SpritePointer,
   void *SourceImagePointer,
   void *TlutPointer,
   int Stride,
   int SubImageWidth,
   int SubImageHeight,
   int SourceImageType,
   int SourceImageBitSize,
   int SourceImageOffsetS,
   int SourceImageOffsetT);</PRE></FONT>

<B>Notes</B><BR>
The sprite microcode does not directly support Z-Buffering. This is 
unnecessary as Z-Buffering can be accomplished outside of the sprite 
microcode by setting up the proper rendering mode and making use of 
the hardware primitive depth registers. The following is a code fragment for doing 
Z-Buffering:<BR>
<BR>
<FONT FACE="COURIER NEW,COURIER" SIZE=3><PRE>gDPSetRenderMode(glistp++,
   G_RM_AA_ZB_OPA_SURF,
   G_RM_AA_ZB_OPA_SURF2);
gDPSetDepthSource(glistp++,
   G_ZS_PRIM);
gDPSetCombineMode(glistp++,
   G_CC_DECALRGB,
   G_CC_DECALRGB);
gDPSetPrimDepth(glistp++,
   ZBufferValue, 0);
guSprite2DInit(MySprite,
   ImagePointer, TlutPointer, 
   ImageWidth, RectangleWidth,
   RectangleHeight, 
   ImageType, ImageSize, 
   TextureStartS, TextureStartT); 
gSPSprite2DBase(glistp++,
   OS_K0_TO_PHYSICAL(MySprite)); 
gSPSprite2DScaleFlip(glistp++,
   ScaleX, ScaleY, 
   FlipTextureX, FlipTextureY); 
gSPSprite2DDraw(glistp++,
   PScreenX, PScreenY);</PRE></FONT>

<B>Warnings, Limitations, and Workarounds</B><BR>
Images that have been non-unit scaled and flipped around the Y axis 
may not be smoothly converted in the vertical direction, depending on 
the quantity of sub-pixels.  Jumping will occur at a certain quantity.  
The solution is to convert non-unit scaling to unit amounts in the 
vertical direction.<BR>
<BR>

The Sprite Microcode was designed to be able to scale up images by 
any amount.  Images can also be scaled down together with some 
attendant artifacts.  Please note that, while the TextureScaleX and 
TextureScaleY parameters are s 5.10 fixed-point numbers, they are 
restricted to being positive.  Consequently, the largest useable scale 
value is 32767, which corresponds to a texel to pixel ratio of 31.999.<BR>
<BR>

Texture images that are either scaled in the Y axis or placed on a 
subpixel scanline boundary require filtering by the hardware texture 
filter unit.  This filtering requires that at least one extra line in 
the screen image be loaded in the texture memory so that the filtering 
can occur.  Because the texture memory is limited to 4KB, the following 
restrictions are in effect:

<UL><LI>32-bit subrectangles that are scaled in the Y direction are clamped by the microcode to a maximum of 512 texels wide. 
<LI>32-bit subrectangles that are placed at the beginning of a subpixel boundary in the Y direction and are larger than 512 texels in width are clamped by the microcode to being on an integral scan line boundary.
<LI>These filtering conditions also mean that, when displaying a Y scaled image, you need to add 1 to the T value to prevent filtering of texels outside the range.
<LI>Y flipped images that have been scaled vertically by a non-squared value will have slightly different heights from their non-flipped versions. If you are doing an animation involving scaled flipped and non-flipped textures, restrict the Y scale value to a squared value.</UL>

<B>See Also</B><BR>
<FONT FACE="COURIER NEW,COURIER"><A HREF="../ucode/gspSprite2D.html">gspSprite2D</A><BR>
<A HREF="../gsp/gSPSprite2DBase.html">gSPSprite2DBase</A><BR>
<A HREF="../gsp/gSPSprite2DDraw.html">gSPSprite2DDraw</A><BR></FONT>

<!---------------------------------------------------->
<!--Define Button Bar in a Table for Bottom-Right-->
<!---------------------------------------------------->
<BR>
      <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 ALIGN="center">

         <TR VALIGN="top" ALIGN="center" WIDTH=312>


            <TD COLSPAN=1 WIDTH=52>
               <IMG SRC="../images/space.gif" WIDTH=52 HEIGHT=30 BORDER=0></TD>
            <TD COLSPAN=1 WIDTH=52>
               <IMG SRC="../images/space.gif" WIDTH=52 HEIGHT=30 BORDER=0></TD>
            <TD COLSPAN=1 WIDTH=52>
               <IMG SRC="../images/space.gif" WIDTH=52 HEIGHT=30 BORDER=0></TD>
            <TD COLSPAN=1 WIDTH=52>
               <IMG SRC="../images/space.gif" WIDTH=52 HEIGHT=30 BORDER=0></TD>
            <TD COLSPAN=1 WIDTH=52>
               <IMG SRC="../images/space.gif" WIDTH=52 HEIGHT=30 BORDER=0></TD>
            <TD COLSPAN=1 WIDTH=52>
               <IMG SRC="../images/space.gif" WIDTH=52 HEIGHT=30 BORDER=0></TD>
         </TR>
         <TR VALIGN="top" ALIGN="center">


            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../al/al.html">
               <IMG SRC="../images/bb_al.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../gdp/gdp.html">
               <IMG SRC="../images/bb_gdp.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../gdsp/gdsp.html">
               <IMG SRC="../images/bb_gdsp.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../gsp/gsp.html">
               <IMG SRC="../images/bb_gsp.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../gt/gt.html">
               <IMG SRC="../images/bb_gt.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../gu/gu.html">
               <IMG SRC="../images/bb_gu.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
         </TR>
         <TR VALIGN="top" ALIGN="right">


            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../math/math.html">
               <IMG SRC="../images/bb_math.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../nusys/nusys.html">
               <IMG SRC="../images/bb_nusys.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../os/os.html">
               <IMG SRC="../images/bb_os.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../sp/sp.html">
               <IMG SRC="../images/bb_sp.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../uh/uh.html">
               <IMG SRC="../images/bb_uh.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../64dd/64dd.html">
               <IMG SRC="../images/bb_64dd.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
      </TABLE>

      <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=425>
         <TR VALIGN="bottom" ALIGN="center" WIDTH=425>
            <TD><BR><BR>
            <IMG BORDER=0 HEIGHT=25 SRC="../images/nin_logo.gif">
            </TD>
         </TR>
         <TR VALIGN="bottom" ALIGN="center" WIDTH=425>
            <TD>
            <FONT FACE="arial" COLOR=FF0000 SIZE="-1"><B>Nintendo<SUP>&reg;</SUP> Confidential</B><BR><BR><B>Warning:</B> all information in this document is confidential and covered by a non-disclosure agreement. You are responsible for keeping this information confidential and protected. Nintendo will vigorously enforce this responsibility.<BR><BR></FONT><FONT FACE="arial" SIZE=-2 COLOR=0000A0>
            <B><BR>
               Copyright &copy; 1998<BR>
               Nintendo of America Inc. All rights reserved<BR>Nintendo and N64 are registered trademarks of Nintendo<BR>
               Last updated June 1998
            </B>
            </FONT>
            </TD>
         </TR>
      </TABLE>
      </FONT>
      </TD>
   </TR>
</TABLE>
</BODY>
</HTML>




