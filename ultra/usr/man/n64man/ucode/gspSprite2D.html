<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>

<!---------------------------------------------------->
<!--Title, Header, and META Block-->
<!---------------------------------------------------->

<HEAD>
<TITLE>N64 Functions Reference (HTML Manual Pages) Function Page</TITLE>

<META Name="DESCRIPTION" CONTENT="The N64 Functions Reference completely describes all the N64 functions that you can use to develop games for the N64 operating system.">
<META NAME="CLASSIFICATION" CONTENT="functions, reference, N64, man pages, HTML, manpages, pages, development, Nintendo, license, tips, secrets, help, manual, guide, success, money, profit, index, indexing, online, on-line">
<META NAME="KEYWORDS" CONTENT="functions, reference, N64, man pages, HTML, manpages, pages, development, Nintendo, license, tips, secrets, help, manual, guide, success, money, profit, index, indexing, online, on-line">
<META HTTP-EQUIV="KEYWORDS" CONTENT="functions, reference, N64, man pages, HTML, manpages, pages, development, Nintendo, license, tips, secrets, help, manual, guide, success, money, profit, index, indexing, online, on-line">
<META NAME="Author" CONTENT="Nintendo of America Inc.">
<META NAME="Generator" CONTENT="WebEdit Pro version 2.0 for Windows 95">
</HEAD>


<!---------------------------------------------------->
<!--Colors and Background Graphic Block-->
<!---------------------------------------------------->

<BODY BGCOLOR="#FFFFFF" BACKGROUND = "../images/lineback.gif" text=29296B link=#0000A0
vlink=20297c alink=86ffff>
<A NAME="TOP"></A>


<!---------------------------------------------------->
<!--Define Master Table Structure-->
<!---------------------------------------------------->

<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 UNITS="pixels" WIDTH=600>
   <TR VALIGN="top" ALIGN="left">
      <TD COLSPAN=1 WIDTH=25>
         <IMG SRC="../images/space.gif" WIDTH=25 HEIGHT=1 BORDER=0></TD>
      <TD COLSPAN=1 WIDTH=175>
         <IMG SRC="../images/space.gif" WIDTH=175 HEIGHT=1 BORDER=0></FONT></TD>
      <TD COLSPAN=1 WIDTH=10>
         <IMG SRC="../images/space.gif" WIDTH=10 HEIGHT=1 BORDER=0></TD>
      <TD COLSPAN=1 WIDTH=25>
         <IMG SRC="../images/space.gif" WIDTH=25 HEIGHT=1 BORDER=0></TD>
      <TD COLSPAN=1 WIDTH=375>
         <IMG SRC="../images/space.gif" WIDTH=375 HEIGHT=1 BORDER=0></TD>
   </TR>


<!---------------------------------------------------->
<!--Define Left Column Contents-->
<!---------------------------------------------------->

   <TR VALIGN="top" ALIGN="left">
      <TD COLSPAN=2 WIDTH=200 ROWSPAN=1>
      <FONT SIZE=-2 COLOR=#0000A0 FACE="ARIAL">

      <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=180>
         <TR VALIGN="bottom" ALIGN="center" >
            <TD>
            <A HREF="../misc/home.html">
               <IMG BORDER=0 SRC="../images/ncube.gif"></A><BR><BR>
            <FONT COLOR=#29296B FACE="ARIAL" SIZE=-1>
            <B>N64<SUP>&reg;</SUP> Functions Menu</B><BR>

            </FONT>
            </TD>
         </TR>
      </TABLE><BR>

<A HREF="../al/al.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> al - Audio Library Functions</A><BR>
<A HREF="../gdp/gdp.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> gDP - DP GBI Macros</A><BR>
<A HREF="../gdsp/gdsp.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> gdSP - General GBI Macros</A><BR>
<A HREF="../gsp/gsp.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> gSP - SP GBI Macros</A><BR>
<A HREF="../gt/gt.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> gt - Turbo Microcode RDP</A><BR>
<A HREF="../gu/gu.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> gu - Graphics Utilities</A><BR>
<A HREF="../math/math.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> Math - Math Functions</A><BR>
<A HREF="../nusys/nusys.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> nuSys - NuSystem</A><BR>
<A HREF="../os/os.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> os - N64 Operating System</A><BR>
<A HREF="../sp/sp.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> sp - Sprite Library Functions</A><BR>
<A HREF="../uh/uh.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> uh - Host to Target IO</A><BR>
<A HREF="../64dd/64dd.html">
   <IMG BORDER=0 SRC="../images/bookclosed.gif"> 64DD - N64 Disk Drive</A><BR><TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=170><TR VALIGN="bottom" ALIGN="center" ><TD><BR><FONT COLOR="FF0000" FACE="arial" SIZE="-1"><B>Nintendo<SUP>&reg;</SUP> Confidential</B></FONT></TD></TR></TABLE>

<!---------------------------------------------------->
<!--Define Bottom-Left Graphics-->
<!---------------------------------------------------->

<BR>
<BR>
      <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 ALIGN="left">
         <TR VALIGN="top" ALIGN="center" WIDTH=210>
            <TD>
            <A HREF="../misc/home.html">
               <IMG BORDER=0 SRC="../images/btn_home.gif" WIDTH=54></A>

            <A HREF="../misc/search.html">
               <IMG BORDER=0 SRC="../images/btn_search.gif" WIDTH=54></A>

            <A HREF="../misc/glossary.html">
               <IMG BORDER=0 SRC="../images/btn_glossary.gif" WIDTH=54></A>
            </TD>
         </TR>
      </TABLE>

<!---------------------------------------------------->
<!--Define Spacer Column Contents-->
<!---------------------------------------------------->

      <TD COLSPAN=1 WIDTH=10 HEIGHT=400 ROWSPAN=1>
      <IMG SRC="../images/space.gif" BORDER=0></TD>


<!---------------------------------------------------->
<!--Define Right Column Graphics-->
<!---------------------------------------------------->

      <TD COLSPAN=2 ROWSPAN=1 WIDTH=425 ALIGN="left">
      <FONT COLOR=#000000 FACE="ARIAL" SIZE=-1>

      <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=427>
         <TR VALIGN="top" ALIGN="center" >
            <TD>
            <A HREF="../misc/home.html">
            <IMG BORDER=0 HEIGHT=85 SRC="../images/mantitle.gif"></A><BR><BR>
            </TD>
         </TR>
      </TABLE>


      <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=427>
         <TR VALIGN="top" ALIGN="left" >
            <TD>
            <A HREF="../ucode/ucode.html">
            <IMG BORDER=0 SRC="../images/mh_ucode.gif"></A>
            </TD>
         </TR>
      </TABLE><BR>

<!---------------------------------------------------->
<!--Define Right Column Text ** INSERT TEXT HERE ** -->
<!---------------------------------------------------->

<FONT COLOR="0000A0"><H2>gspSprite2D Microcode<BR>
gspSprite2D.dram Microcode<BR>
gspSprite2D.fifo Microcode</H2></FONT>

The gspSprite2D microcode is optimized for rendering 2D sprite images. Sprites are implemented as textured screen rectangles. gspSprite2D does not support 3D lines, 3D triangles, vertex operations, matrix operations, lighting, or fog. All of the DP commands such as blender modes, and color combiner modes are supported. Z-Buffering can be used to arrange the order of the sprites from front to back.<BR>
<BR>

In other words, this is the optimized, high-quality, full-featured 2D sprite geometry microcode.  
 It supports automatic subdivision and loads any size of all of the 
 texture format sizes and types supported in the  command, and sends 
 it directly to the RDP.  Additionally, images can be scaled up or 
 inverted in the X or Y directions.

<H3>Commands</H3>
 The sprite microcode is accessed through a combination of four 
 functions/macros as follows:
<UL>
<LI><FONT FACE="COURIER NEW,COURIER"><A HREF="../gu/guSprite2DInit.html">guSprite2DInit</A></FONT> initializes a specified
 a sprite structure.It allows the application 
 to be run without directly initializing the sprite structure.
<LI><FONT FACE="COURIER NEW,COURIER"><A HREF="../gsp/gSPSprite2DBase.html">gSPSprite2DBase</A></FONT> sends the sprite microcode 
 to the sprite structure to start actual processing. It initializes the common sprite 
 parameters.  It does not perform actual screen drawing. 
<LI><FONT FACE="COURIER NEW,COURIER"><A HREF="../gsp/gSPSprite2DScaleFlip.html">gSPSprite2DScaleFlip</A></FONT> is used to specify the X/Y scaling and/or flipping parameters for a sprite.  It does not perform actual screen drawing.
<LI><A HREF="../gsp/gSPSprite2DDraw.html">gSPSprite2DDraw</A> specifies the screen coordinates where the sprite is to be drawn, and starts actual screen drawing using the parameters specified by <FONT FACE="COURIER NEW,COURIER">gSPSprite2DBase</FONT> and <FONT FACE="COURIER NEW,COURIER">gSPSprite2DScaleFlip</FONT>.  
</UL>
<H3>Simple Code for Displaying a Sprite</H3>

<FONT FACE="COURIER NEW,COURIER" SIZE=3><PRE>#include "gu.h"

#include "gbi.h"
     uSprite MySprite;
     guSprite2DInit(Mysprite, ImagePointer,
        TlutPointer, ImageWidth,
        RectangleWidth, RetangleHeight, 
        ImageType, ImageSize, 
        TextureStartS, TextureStartT);

gSPSprite2DBase(glistp++,
    OS_K0_TO_PHYSICAL(MySprite));

gSPSprite2DScaleFlip (glistp++, ScaleX, ScaleY, 
   FlipTextureX, FlipTextureY); 

gSPSprite2DDraw (glistp++, PScreenX, PScreenY)

typedef struct {
     void *SourceImagePointer;
     void *TlutPointer;
     short Stride;
     short SubImageWidth;
     short SubImageHeight;
     char  SourceImageType;
     char  SourceImageBitSize;
     short SourceImageOffsetS;
     short SourceImageOffsetT;
   /* 20 bytes for above */
 
   /* padding to bring structure size to
      64-bit alignment */;
     char dummy[4];
 
} uSprite_t;
 
typedef union {
     uSprite_t  s;
    /* Ensure this is 64-bit aligned */;
     long long int force_structure_alignment[3];
} uSprite;
 
     void guSprite2DInit(uSprite *SpritePointer,
     void *SourceImagePointer,
     void *TlutPointer,
     int Stride,
     int SubImageWidth,
     int SubImageHeight,
     int SourceImageType,
     int SourceImageBitSize,
     int SourceImageOffsetS,
     int SourceImageOffsetT);</PRE></FONT>
 
<H3>Arguments</H3>

<UL><LI><B>SpritePointer</B> is the pointer to the sprite structure that sets the parameters.
<LI><B>SourceImagePointer</B> is the base pointer of the texture image in memory     containing the rectangle to be displayed.
<LI><B>TlutPointer</B> is the pointer to the color index used for CI images.  Set it to Null when CI images will not be used.  
<LI><B>Stride</B> is the texel width of the base image in memory. 
<LI><B>SubImageWidth</B> is the texel width of the image to be displayed. 
<LI><B>SubImageHeight</B> is the texel height of the image to be displayed. 
<LI><B>SourceImageType</B> specifies the format of the texture image in memory. All texture formats supported by the hardware are allowed, such as <FONT FACE="COURIER NEW,COURIER">G_IM_FMT_RGB</FONT> or <FONT FACE="COURIER NEW,COURIER">G_IM_FMT_CI</FONT>.
<LI><B>SourceImageBitSize</B> is the number of bits per texel of the input image. All texture sizes supported by the hardware are allowed, such as <FONT FACE="COURIER NEW,COURIER">G_IM_SIZ_32b</FONT> or <FONT FACE="COURIER NEW,COURIER">G_IM_SIZ_4b</FONT>.
<LI><B>ScaleX</B> specifies the scale in the X axis for the input screen     image as a s 5.10 fixed-point number.  A value of 1024     specifies 1 to 1 scaling. A value of 512 enlarges the     input texels by 2 times in the output scaling pixels.  
<LI>    Scale values should be (1024 in order to avoid an    unnatural feel.  Scale values must be positive.  Use the    <FONT FACE="COURIER NEW,COURIER">FlipTextureX</FONT> variable to create negatively scaled images.
<LI><B>ScaleY</B> specifies the scale in the Y axis for the input screen   image as a s 5.10 fixed-point number.  A value of 1024     specifies 1 to 1 scaling. A value of 512 enlarges the     input texels by 2 times in the output scaling pixels.      Scale values should be (1024 in order to avoid an unnatural     feel.  Scale values must be positive.  Use the FlipTextureY     variable to create negatively scaled images.
<LI><B>FlipTextureX</B> specifies whether the image to be displayed should be    inverted in the X direction. 
<LI><B>FlipTextureY</B>  specifies whether the image to be displayed should be    inverted in the Y direction. 
<LI><B>SourceImageOffsetS</B> is the offset in texel columns from the origin of the base     image. It specifies the starting point of the rectangular     region for texel display within the base image.
<LI><B>SourceImageOffsetT</B> is the offset in texel lines from the origin of the base     image. It specifies the starting point of the rectangular region   for texel display within the base image.
<LI><B>PScreenX</B> specifies the X location in the screen coordinates of the output image.  The origin is in the upper-left corner of the screen.
<LI><B>PScreenY</B>  Specifies the Y location in the screen coordinates of the output     image.  The origin is in the upper-left corner of the screen.</UL>

<H3>GBI</H3>
 The following GBI commands are not supported by this microcode:

<FONT FACE="COURIER NEW,COURIER"><UL><LI> <A HREF="../gsp/gSPLine3D.html">gSPLine3D</A>
<LI> <A HREF="../gsp/gSP1Triangle.html">gSP1Triangle</A></UL></FONT>

<H3>Note</H3>
 The sprite microcode does not directly support Z-Buffering. This is 
 unnecessary as Z-Buffering can be accomplished outside of the sprite 
 microcode by setting up the proper rendering mode and making use of 
 the hardware primitive depth registers.  Following is a code fragment that does 
 Z-Buffering.

<FONT FACE="COURIER NEW,COURIER" SIZE=3><PRE>gDPSetRenderMode(glistp++,
   G_RM_AA_ZB_OPA_SURF,
   G_RM_AA_ZB_OPA_SURF2);

gDPSetDepthSource(glistp++,
   _ZS_PRIM);

gDPSetCombineMode(glistp++,
   G_CC_DECALRGB, G_CC_DECALRGB);

gDPSetPrimDepth(glistp++,
   ZBufferValue, 0);

guSprite2DInit(MySprite, ImagePointer,
   TlutPointer, ImageWidth,
   RectangleWidth, RectangleHeight, 
   ImageType, ImageSize, 
   TextureStartS, TextureStartT); 

gSPSprite2DBase(glistp++,
   OS_K0_TO_PHYSICAL(MySprite)); 

gSPSprite2DScaleFlip(glistp++,
   ScaleX, ScaleY, 
   FlipTextureX, FlipTextureY); 

gSPSprite2DDraw(glistp++, PScreenX, PScreenY);</PRE></FONT>

<H3>Warnings, Limitations, and Workarounds</H3>

Images that have been non-unit scaled and flipped around the Y axis 
 may not be smoothly converted in the vertical direction, depending on 
 the quantity of sub-pixels.  Jumping will occur at a certain quantity.  
 The solution is to convert non-unit scaling to unit amounts in the 
 vertical direction.<BR>
<BR>

The Sprite Microcode was designed to be able to scale up images by 
 any amount.  Images can also be scaled down together with some 
 attendant artifacts.  Please note that, while the TextureScaleX and 
 TextureScaleY parameters are s 5.10 fixed-point numbers, they are 
 restricted to being positive.  Consequently, the largest usable scale 
 value is 32767, which corresponds to a texel to pixel ratio of 31.999.<BR>
<BR>

 Texture images that are either scaled in the Y axis or placed on a 
 subpixel scanline boundary require filtering by the hardware texture 
 filter unit.  This filtering requires that at least one extra line in 
 the screen image be loaded in the texture memory so that the filtering 
 can occur.<BR>
<BR>

The texture memory is limited to 4K bytes, so there are some restrictions:
<UL>
<LI>32 bit subrectangles that are scaled in the Y direction are clamped by the microcode to a maximum of 512 texels wide.

 <LI>32 bit subrectangles that are placed at the beginning of a subpixel 
 boundary in the Y direction and that are larger than 512 texels in width 
 are clamped by the microcode to being on an integral scan line boundary.

 <LI>These filtering conditions also mean that, when displaying 
 a Y-scaled image, you will need to add 1 to the T value to prevent 
 filtering of texels outside the range.

 <LI>Y flipped images that have been scaled vertically by a non-squared 
 value will be slightly different in height than their non-flipped versions.  
 If you are doing an animation involving scaled flipped and non-flipped textures, 
 restrict the Y scale value to a squared value.
</UL>

<B>See Also</B>
<FONT FACE="COURIER NEW,COURIER"><BR><A HREF="../ucode/gspLine3D.html">gspLine3D</A>
<BR><A HREF="../ucode/gspTurbo3D.html">gspTurbo3D</A>
<BR><A HREF="../ucode/gspFast3D.html">gspFast3D</A>
<BR><A HREF="../os/osSpTaskStart.html">osSpTaskStart</A>
<BR><A HREF="../gsp/gSPSprite2DBase.html">gSPSprite2DBase</A>
<BR><A HREF="../gsp/gSPSprite2DScaleFlip.html">gSPSprite2DScaleFlip</A>
<BR><A HREF="../gsp/gSPSprite2DDraw.html">gSPSprite2DDraw</A></FONT>

<!---------------------------------------------------->
<!--Define Button Bar in a Table for Bottom-Right-->
<!---------------------------------------------------->
<BR>
      <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 ALIGN="center">

         <TR VALIGN="top" ALIGN="center" WIDTH=312>
            
               
            <TD COLSPAN=1 WIDTH=52>
               <IMG SRC="../images/space.gif" WIDTH=52 HEIGHT=30 BORDER=0></TD>
            <TD COLSPAN=1 WIDTH=52>
               <IMG SRC="../images/space.gif" WIDTH=52 HEIGHT=30 BORDER=0></TD>
            <TD COLSPAN=1 WIDTH=52>
               <IMG SRC="../images/space.gif" WIDTH=52 HEIGHT=30 BORDER=0></TD>
            <TD COLSPAN=1 WIDTH=52>
               <IMG SRC="../images/space.gif" WIDTH=52 HEIGHT=30 BORDER=0></TD>
            <TD COLSPAN=1 WIDTH=52>
               <IMG SRC="../images/space.gif" WIDTH=52 HEIGHT=30 BORDER=0></TD>
            <TD COLSPAN=1 WIDTH=52>
               <IMG SRC="../images/space.gif" WIDTH=52 HEIGHT=30 BORDER=0></TD>
         </TR>
         <TR VALIGN="top" ALIGN="center">
            
               
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../al/al.html">
               <IMG SRC="../images/bb_al.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../gdp/gdp.html">
               <IMG SRC="../images/bb_gdp.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../gdsp/gdsp.html">
               <IMG SRC="../images/bb_gdsp.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../gsp/gsp.html">
               <IMG SRC="../images/bb_gsp.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../gt/gt.html">
               <IMG SRC="../images/bb_gt.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../gu/gu.html">
               <IMG SRC="../images/bb_gu.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
         </TR>
         <TR VALIGN="top" ALIGN="right">
            
               
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../math/math.html">
               <IMG SRC="../images/bb_math.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../nusys/nusys.html">
               <IMG SRC="../images/bb_nusys.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../os/os.html">
               <IMG SRC="../images/bb_os.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../sp/sp.html">
               <IMG SRC="../images/bb_sp.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../uh/uh.html">
               <IMG SRC="../images/bb_uh.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
            <TD COLSPAN=1 WIDTH=52>
               <A HREF="../64dd/64dd.html">
               <IMG SRC="../images/bb_64dd.gif" WIDTH=52 HEIGHT=21 BORDER=0></A></TD>
      </TABLE>

      <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 WIDTH=425>
         <TR VALIGN="bottom" ALIGN="center" WIDTH=425>
            <TD><BR><BR>
            <IMG BORDER=0 HEIGHT=25 SRC="../images/nin_logo.gif">
            </TD>
         </TR>
         <TR VALIGN="bottom" ALIGN="center" WIDTH=425>
            <TD>
            <FONT FACE="arial" COLOR=FF0000 SIZE="-1"><B>Nintendo<SUP>&reg;</SUP> Confidential</B><BR>
            <BR>
               <B>Warning:</B> all information in this document is confidential and covered by a non-disclosure agreement. You are responsible for keeping this information confidential and protected. Nintendo will vigorously enforce this responsibility.<BR><BR></FONT><FONT FACE="arial" SIZE=-2 COLOR=0000A0><B>Copyright &copy; 1998<BR>
               Nintendo of America Inc. All rights reserved<BR>Nintendo and N64 are registered trademarks of Nintendo<BR>
               Last updated June 1998
            </B>
            </FONT>
            </TD>
         </TR>
      </TABLE>
      </FONT>
      </TD>
   </TR>
</TABLE>
</BODY>
</HTML>


