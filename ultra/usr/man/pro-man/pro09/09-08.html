<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<BASE TARGET="main">
<head>
<title>N64 Programming Manual Chapter 9</title>
</head>
<body bgcolor="#FFFFFF">

<table border=0><tr><td><a target="_top" href="../pro09/index9.7.html"><img border=0 src="../images/previous.gif"></a></td>
<td>&nbsp;</td>
<td><a target="_top" href="../pro09/index9.9.html"><img border=0  src="../images/next.gif"></a></td></tr></table>
<P>

<b><font face="arial" color="#29296b">Flushing the CPU Data Cache</font></b>

<P>
<font face="arial" size="-1" color="#000000">
The MIPS R4300 CPU transparently caches data accesses on a onboard data cache.  Ordinarily this cache is of no concern to the application, but when an external agent such as the SP or DMA engine is involved, the application must be aware of the caching implications.
<P>
The data cache implements a “write back” replacement policy which means that data stores are held in the cache until the entire cache line is written back, usually due to a cache miss thatrequires the same cache line.  The cache is not coherent with respect to physical memory and thus cache lines must be explicitly written back to memory prior to their use by another processor such as the SP.
<P>
Using the above example, the dynamic data can be written with a single procedure call as follows.  It is expected that this will be done prior to the task list being executed by the SP.
<P>
<pre><font face="courier" size=3>
          osWritebackDCache(dynamicp, sizeof(Dynamic_t));</pre></font>
<P>
<br>
<TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0 ALIGN="center">
         <TR><td align="center"><font face="Arial" size="-2" color="#29296B">
Copyright &copy; 1999<br>
Nintendo of America Inc. All Rights Reserved<BR>
Nintendo and N64 are registered trademarks of Nintendo<br>
Last Updated January, 1999</FONT>
</TD></TR></TABLE>
</body>
</html>